<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Usulan Musrenbang 2027</title>
    
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; }
        .form-container { background: white; max-width: 700px; margin: auto; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { color: #1b5e20; text-align: center; margin-bottom: 25px; text-transform: uppercase; font-size: 1.2rem; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #333; }
        select, input, textarea { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 14px; }
        textarea { height: 100px; resize: vertical; }
        
        /* Custom Style untuk Select2 agar sesuai tema */
        .select2-container--default .select2-selection--single {
            height: 45px; border: 1px solid #ccc; border-radius: 8px; padding-top: 8px;
        }

        .btn-submit { background-color: #2e7d32; color: white; border: none; padding: 15px; width: 100%; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; transition: 0.3s; margin-top: 10px; }
        .btn-submit:hover { background-color: #1b5e20; }
        .btn-submit:disabled { background-color: #ccc; cursor: not-allowed; }
        .loading { display: none; text-align: center; color: #1b5e20; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

<div class="form-container">
    <h2>Form Input Usulan Musrenbang T.A. 2027</h2>
    
    <form id="usulanForm">
        <div class="form-group">
            <label>Kelurahan/Lembang</label>
            <select name="kelurahan" required>
                <option value="">-- Pilih Kelurahan --</option>
                <option>Kelurahan Ariang</option>
                <option>Kelurahan Batupapan</option>
                <option>Kelurahan Bombongan</option>
                <option>Kelurahan Botang</option>
                <option>Kelurahan Buntu Burake</option>
                <option>Kelurahan Kamali Pentalluan</option>
                <option>Kelurahan Lamunan</option>
                <option>Kelurahan Lapandan</option>
                <option>Lembang Lea</option>
                <option>Kelurahan Manggau</option>
                <option>Kelurahan Pantan</option>
                <option>Kelurahan Rante</option>
                <option>Kelurahan Tampo Makale</option>
                <option>Kelurahan Tarongko</option>
                <option>Kelurahan Tondon Mamullu</option>
            </select>
        </div>

        <div class="form-group">
            <label>Bidang</label>
            <select name="bidang" required>
                <option value="">-- Pilih Bidang --</option>
                <option>Bidang Sarana dan Prasarana</option>
                <option>Bidang Sosial Budaya</option>
                <option>Bidang Ekonomi</option>
            </select>
        </div>

        <div class="form-group">
            <label>Nama Kegiatan (Kamus Usulan)</label>
            <select name="kegiatan" id="kegiatanSelect" class="js-select2" required style="width: 100%;">
                <option value=""></option>
                <option>Alat UTTP pada pedagang pasar tidak terstandar</option>
                <option>Bantuan dana terhadap Organisasi Kepramukaan Tingkat Daerah</option>
                <option>Banyaknya UMKM yang belum memiliki NIB</option>
                <option>Belum ada dokumen IPRO Kabupaten Tana Toraja</option>
                <option>Belum ada harmonisasi regulasi daerah dengan regulasi yang dikeluarkan oleh Pemerintah Pusat</option>
                <option>Belum ada Perbup yang mengatur tentang pemberian fasilitasi/insentif di bidang Penanaman Modal di daerah</option>
                <option>Belum meratanya infrastruktur teknologi informasi dan komunikasi terutama di wilayah terpencil</option>
                <option>belum pernah dilaksanakan pelatihan/sosialisasi kepada UMKM utk meningkatkan produktivitas</option>
                <option>Belum pernah mengikuti Pameran Promosi Investasi Daerah</option>
                <option>Bimbingan/Orientasi/Adopsi inovasi</option>
                <option>Bimbingan Teknis dan Supervisi Pengembangan dan Pelaksanaan Upaya Kesehatan Bersumber Daya Masyarakat (UKBM)</option>
                <option>Bimbingan Teknis kepada Pelaku Usaha Masih belum Optimal</option>
                <option>Bimbingan Teknis /Sosialisasi /Adopsi inovasi</option>
                <option>Bimbingan Teknis/ Sosialisasi /Pelatihan</option>
                <option>Bintek Pengembangan kompetensi Keterampilan dan Ketehnikan Konstruksi Tenaga OAP</option>
                <option>Deteksi Dini Penyalahgunaan NAPZA di Fasyankes dan Sekolah</option>
                <option>Distribusi Alat Kesehatan, Obat, Bahan Habis Pakai, Vaksin ke Fasilitas Kesehatan</option>
                <option>Diversifikasi Tanaman Jagung dan Kacang Tanah</option>
                <option>Evaluasi dan Konsultasi Evaluasi RTRW Kabupaten Tana Toraja</option>
                <option>Fasilitasi forum penataan ruang di lingkungan Kabupaten Tana Toraja</option>
                <option>Fasilitasi Pemenuhan Komitmen Penerbitan Izin Pembangunan Kawasan Permukiman</option>
                <option>Fasilitasi Penyediaan Rumah bagi Korban Bencana Kabupaten/Kota</option>
                <option>Fasilitasi Sertifikasi Tenaga Kerja Konstruksi</option>
                <option>Hadiah/penghargaan terhadap pemuda berprestasi</option>
                <option>Hibah/bantuan Sarana Prasarana/Rumah Ibadah/ Organisasi Keagamaan</option>
                <option>HIBAH ke Organisasi Keolahragaan</option>
                <option>Identifikasi dan Penetapan Lahan Pengembalaan Umum</option>
                <option>Identifikasi Potensi Kerja Sama dan Pemberdayaan Jasa Konstruksi</option>
                <option>Kerjasama dengan Badan Promosi Pariwisata Daerah</option>
                <option>Kerja Sama Penyediaan/ Pengelolaan PSU Perumahan</option>
                <option>Kerja Sama Perbaikan Rumah Tidak Layak Huni Beserta PSU</option>
                <option>Koleksi Budaya Etnis</option>
                <option>Konseling Satyagatra</option>
                <option>Kurang berkembangnya industri kecil maupun menengah</option>
                <option>Kurangnya kapasitas SDM di bidang IT Kelurahan/Lembang</option>
                <option>Kurangnya keterampilan pelaku UMKM</option>
                <option>Layanan Informasi Jasa Konstruksi</option>
                <option>Normalisasi Sungai</option>
                <option>Normalisasi Tebing Sungai</option>
                <option>Operasional Pelayanan Puskesmas</option>
                <option>Pelaksanaan event olahraga wisata</option>
                <option>Pelaksanaan Pendampingan Penggunaan Sarana Pendukung Pertanian</option>
                <option>Pelaksanaan Vaksin Anti Rabies</option>
                <option>Pelatihan Pencegahan dan Mitigasi Bencana</option>
                <option>Pelatihan Pengurus BUMDES</option>
                <option>Pelebaran Jalan Kabupaten</option>
                <option>Pelebaran Jembatan Kabupaten</option>
                <option>Pembangunan Bangunan Perkuatan Tebing</option>
                <option>Pembangunan Bendungan</option>
                <option>Pembangunan Embung</option>
                <option>Pembangunan Infrastruktur Sumber Mata Air</option>
                <option>Pembangunan Jalan Kabupaten</option>
                <option>Pembangunan Jaringan Irigasi</option>
                <option>Pembangunan Jembatan</option>
                <option>Pembangunan Perpustakaan Sekolah</option>
                <option>Pembangunan Puskesmas</option>
                <option>Pembangunan Ruang Kelas Baru</option>
                <option>Pembangunan Rumah Baru Layak Huni (Pencegahan Kumuh)</option>
                <option>Pembangunan Sistem Drainase Lingkungan</option>
                <option>Pembangunan Sistem Penyediaan Air Minum (SPAM)</option>
                <option>Pemeliharaan Jalan Kabupaten</option>
                <option>Pengadaan Alat Kesehatan/Alat Penunjang Medik</option>
                <option>Pengadaan Benih Sayur (Kangkung, Sawi, Tomat, Cabe Rawit, dll)</option>
                <option>Pengadaan Hand Traktor</option>
                <option>Pengadaan Ternak Babi</option>
                <option>Pengadaan Ternak Kerbau</option>
                <option>Peningkatan Jaringan Irigasi</option>
                <option>Penyediaan Prasarana, Sarana dan Utilitas Umum (Rabat Beton, Talud, Drainase)</option>
                <option>Penyediaan Jasa Penyedotan Lumpur Tinja</option>
                </select>
        </div>

        <div class="form-group">
            <label>Lokasi Spesifik</label>
            <input type="text" name="lokasi" placeholder="Sebutkan Dusun/RT/Lingkungan..." required>
        </div>

        <div class="form-group">
            <label>OPD Tujuan</label>
            <select name="opd" required>
                <option value="">-- Pilih OPD --</option>
                <option>DPUTR</option>
                <option>DPRKP</option>
                <option>DPKPP (Pertanian)</option>
                <option>Dinas Kesehatan</option>
                <option>Dinas Pendidikan</option>
                <option>Dinas Pariwisata</option>
                <option>Diskoperindag</option>
                <option>Lainnya</option>
            </select>
        </div>

        <div class="form-group">
            <label>Keterangan Tambahan (Volume/Detail)</label>
            <textarea name="keterangan" placeholder="Contoh: Panjang 200m, Lebar 3m, atau rincian lainnya..."></textarea>
        </div>

        <button type="submit" class="btn-submit" id="submitBtn">ðŸ’¾ SIMPAN USULAN</button>
        <div class="loading" id="loadingMsg">Sedang mengirim data ke Google Sheets...</div>
    </form>
</div>

<script>
    // URL Web App Anda
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxNSq8gl8Ll1TevQsa1VZOhr4_S3TTpHsQNMNZNA-3vIvXmd5dSi_DddVnXurR1ioqD/exec";

    $(document).ready(function() {
        // Inisialisasi Fitur Search pada Dropdown Kegiatan
        $('.js-select2').select2({
            placeholder: "-- Cari & Pilih Kegiatan di Kamus --",
            allowClear: true
        });

        // Proses Submit Form
        document.getElementById('usulanForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('submitBtn');
            const loading = document.getElementById('loadingMsg');
            
            btn.disabled = true;
            loading.style.display = "block";

            // Mengambil semua data form
            const formData = new FormData(this);
            const params = new URLSearchParams();
            
            formData.forEach((value, key) => {
                params.append(key, value);
            });

            // Kirim data ke Code.gs
            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: params.toString(),
                headers: { "Content-Type": "application/x-www-form-urlencoded" }
            })
            .then(() => {
                alert("Berhasil! Usulan telah tercatat di sistem.");
                this.reset();
                $('#kegiatanSelect').val(null).trigger('change'); // Reset pencarian
            })
            .catch(err => {
                alert("Error: " + err);
            })
            .finally(() => {
                btn.disabled = false;
                loading.style.display = "none";
            });
        });
    });
</script>

</body>
</html>
